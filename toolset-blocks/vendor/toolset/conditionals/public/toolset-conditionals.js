var toolsetConditionals=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./public_src/index.js")}({"./node_modules/prop-types/factoryWithThrowingShims.js":function(e,t,n){"use strict";var r=n("./node_modules/prop-types/lib/ReactPropTypesSecret.js");function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,c){if(c!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},"./node_modules/prop-types/index.js":function(e,t,n){e.exports=n("./node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./public_src/components/conditionals/scss/edit.scss":function(e,t,n){},"./public_src/components/conditionals/utils/views-shortcode.js":function(e,t){var n=window.Toolset;n&&n.hooks&&n.hooks.addFilter("wpv-filter-wpv-shortcodes-gui-before-do-action",(function(e){return e}))},"./public_src/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"Editor",(function(){return ue})),n.d(t,"AdvancedEditor",(function(){return pt})),n.d(t,"shortcodeGenerator",(function(){return de})),n.d(t,"conditionSummary",(function(){return Pt})),n.d(t,"conditionsTokenizer",(function(){return nt})),n.d(t,"assureNotEmptyConditions",(function(){return Z})),n.d(t,"ShortcodeWrapper",(function(){return Ft})),n.d(t,"incompleteConditions",(function(){return ft})),n.d(t,"ConditionalsModal",(function(){return _t}));n("./public_src/components/conditionals/scss/edit.scss");var r=n("@wordpress/i18n"),o=n("@wordpress/element"),a=n("@wordpress/components"),c=n("toolset/block/control"),i=n("@wordpress/hooks"),s=n("@wordpress/api-fetch"),u=n.n(s),l=n("ToolsetDynamicSources");function p(e){return e&&e.constructor===Object?JSON.parse(JSON.stringify(e)):e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=window.toolsetDynamicSourcesScriptData,R={provider:"__current_post",source:null,field:null,customPost:null},x=[{value:"wpv-archive-title",label:Object(r.__)("Archive title","wpv-views")},{value:"wpv-bloginfo",label:Object(r.__)("Site information","wpv-views"),extra:[{value:"",label:Object(r.__)("Select a blog info","wpv-views")},{value:'show="name"',label:Object(r.__)("Site title","wpv-views")},{value:'show="description"',label:Object(r.__)("Site tagline","wpv-views")},{value:'show="url"',label:Object(r.__)("Site URL","wpv-views")},{value:'show="admin_email"',label:Object(r.__)("E-mail address","wpv-views")},{value:'show="charset"',label:Object(r.__)("Encoding for pages","wpv-views")},{value:'show="version"',label:Object(r.__)("WordPress version","wpv-views")},{value:'show="html_type"',label:Object(r.__)("Content-Type of WordPress HTML pages","wpv-views")},{value:'show="text_direction"',label:Object(r.__)("Text direction","wpv-views")},{value:'show="language"',label:Object(r.__)("Language of WordPress","wpv-views")},{value:'show="stylesheet_url"',label:Object(r.__)("Primary CSS URL","wpv-views")},{value:'show="stylesheet_directory"',label:Object(r.__)("Primary CSS directory","wpv-views")},{value:'show="template_url"',label:Object(r.__)("Theme's URL","wpv-views")},{value:'show="pingback_url"',label:Object(r.__)("Pingback XML-RPC file URL","wpv-views")},{value:'show="atom_url"',label:Object(r.__)("Atom feed URL","wpv-views")},{value:'show="rdf_url"',label:Object(r.__)("RDF/RSS 1.0 feed URL","wpv-views")},{value:'show="rss_url"',label:Object(r.__)("RSS 0.92 feed URL","wpv-views")},{value:'show="rss2_url"',label:Object(r.__)("RSS 2.0 feed URL","wpv-views")},{value:'show="comments_atom_url"',label:Object(r.__)("Comments Atom feed URL","wpv-views")},{value:'show="comments_rss2_url"',label:Object(r.__)("Comments RSS 2.0 feed URL","wpv-views")}]},{value:"wpv-found-count",label:Object(r.__)("Number of items found in Views","wpv-views")},{value:"wpv-items-count",label:Object(r.__)("Number of items displayed on the page","wpv-views")},{value:"wpv-loop-index",label:Object(r.__)("Current index in the Views loop","wpv-views")},{value:"wpv-search-term",label:Object(r.__)("Search term","wpv-views")}],E=[{label:Object(r.__)("Post data","wpv-views"),value:"post"},{label:Object(r.__)("Static value","wpv-views"),value:"value"},{label:Object(r.__)("Views Shortcode","wpv-views"),value:"views_shortcode"},{label:Object(r.__)("Custom Shortcode","wpv-views"),value:"custom_shortcode"},{label:Object(r.__)("Custom function","wpv-views"),value:"function"},{label:Object(r.__)("Current user ID","wpv-views"),value:"current_user"},{label:Object(r.__)("Current user role","wpv-views"),value:"current_role"},{label:Object(r.__)("Other user","wpv-views"),value:"custom_user"},{label:Object(r.__)("Other role","wpv-views"),value:"custom_role"},{label:Object(r.__)("Date function","wpv-views"),value:"date"}],j={current_role:Object(r.__)("The field returns the role slug of the logged-in user, e.g. administrator","toolsetblocks")},S=[{label:Object(r.__)("Now","wpv-views"),value:"now"},{label:Object(r.__)("Today","wpv-views"),value:"today"},{label:Object(r.__)("Future Day","wpv-views"),value:"future_day",extra:[{name:"extra",placeholder:Object(r.__)("Number of days","wpv-views")}]},{label:Object(r.__)("Past Day","wpv-views"),value:"past_day",extra:[{name:"extra",placeholder:Object(r.__)("Number of days","wpv-views")}]},{label:Object(r.__)("This Month","wpv-views"),value:"this_month"},{label:Object(r.__)("Future Month","wpv-views"),value:"future_month",extra:[{name:"extra",placeholder:Object(r.__)("Number of months","wpv-views")}]},{label:Object(r.__)("Past Month","wpv-views"),value:"past_month",extra:[{name:"extra",placeholder:Object(r.__)("Number of months","wpv-views")}]},{label:Object(r.__)("This Year","wpv-views"),value:"this_year"},{label:Object(r.__)("Future Year","wpv-views"),value:"future_year",extra:[{name:"extra",placeholder:Object(r.__)("Number of years","wpv-views")}]},{label:Object(r.__)("Past Year","wpv-views"),value:"past_year",extra:[{name:"extra",placeholder:Object(r.__)("Number of years","wpv-views")}]},{label:Object(r.__)("Seconds from Now","wpv-views"),value:"seconds_from_now",extra:[{name:"extra",placeholder:Object(r.__)("Number of seconds","wpv-views")}]},{label:Object(r.__)("Months from Now","wpv-views"),value:"months_from_now",extra:[{name:"extra",placeholder:Object(r.__)("Number of months","wpv-views")}]},{label:Object(r.__)("Years from Now","wpv-views"),value:"years_from_now",extra:[{name:"extra",placeholder:Object(r.__)("Number of years","wpv-views")}]},{label:Object(r.__)("Custom Date","wpv-views"),value:"date",extra:[{name:"extra",placeholder:Object(r.__)("Date (DD, MM, YYYY)","wpv-views"),match:"^([0-2]?[0-9]|3[0-1]),\\s*(0?[0-9]|1[0-2]),\\s*(\\d{4})$",matchInfo:"DD, MM, YYYY"}]}],C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(v,e);var t,n,s,f=w(v);function v(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),y(h(t=f.call(this,e)),"reactSelectStyles",{menu:function(e){return d(d({},e),{},{position:"relative"})},input:function(e,t){return d(d({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),y(h(t),"filterSource",(function(e,n){if(t.props.isDateFunction&&n===t.props.componentId){var r=p(e);return Object.keys(r).forEach((function(e){var t=r[e].find((function(e){return"post"===e.id}));t&&(t.options=t.options.filter((function(e){return!["post-date","post-date-gmt","post-date-modified","post-date-modified-gmt"].includes(e.value)})))})),r}return e})),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t.statelessProps=p(e),Object(i.addFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",t.getFilterNamespace(),t.filterSource),t.state={error:!1},t}return t=v,(n=[{key:"getFilterNamespace",value:function(){return"argument-".concat(this.props.componentId)}},{key:"componentDidUpdate",value:function(){this.statelessProps=p(this.props),Object(i.removeFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",this.getFilterNamespace()),Object(i.addFilter)("tb.dynamicSources.filters.adjustSourcesForBlocks",this.getFilterNamespace(),this.filterSource)}},{key:"getDSAttributes",value:function(){var e=this,t=this.statelessProps.source.value||R;return{label:Object(r.__)("Select a condition source","wpv-views"),toggleHide:!0,condition:!0,postProvider:t.provider,source:t.source,field:t.field,customPost:t.customPost,category:"text",fieldSelectedCallback:function(t){e.setSourceField(t)},sourceContentFetchedCallback:function(){}}}},{key:"isRepetingField",value:function(e){if(!e||e.constructor!==Object)return!1;var t=!!e.provider&&("__custom_post"===e.provider&&e.customPost&&e.customPost.value?e.customPost.value:e.provider);if(t&&O.dynamicSources[t]){var n=O.dynamicSources[t].filter((function(e){return"toolset"===e.id}));if(n.length&&n[0].options){var r=n[0].options.filter((function(t){return t.value===e.source}));if(r.length&&r[0].fields){var o=r[0].fields.filter((function(t){return t.value===e.field}));if(o.length&&o[0].is_repetitive)return!0}}}return!1}},{key:"setSourceField",value:function(e){var t=this;if(null!==e){var n=e;n.provider=n.postProvider,delete n.postProvider;var r,o=Object.assign({},this.statelessProps.source.value,n);JSON.stringify(o)!==JSON.stringify(this.props.source.value)&&(o.is_repetitive=this.isRepetingField(o),r=o,t.statelessProps.source.value=r,t.props.udpateConditionCallback(t.statelessProps.source))}}},{key:"setConditionElement",value:function(e,t){var n=p(this.props.source);if(n[e]=t,"source"===e?(n.value="",n.extra=""):"value"===e&&(n.extra=""),this.props.udpateConditionCallback(n),this.statelessProps.source=n,t&&"extra"===e&&"date"===n.source.value){var r=S.find((function(e){return e.value===n.value.value}));if(r.extra){var o=r.extra.find((function(e){return!!e.match&&!t.match(new RegExp(e.match))}));o?(this.props.onError(o.matchInfo),this.setState({error:o.matchInfo})):(this.props.onError(!1),this.setState({error:!1}))}}}},{key:"loadUsers",value:function(e){return new Promise((function(t){u()({path:"/wp/v2/users?search="+e}).then((function(e){var n=e.map((function(e){return{label:e.name,value:e.id}}));t(n)}))}))}},{key:"render",value:function(){var e=this,t=window.toolsetBlocksStrings,n=this.props,i=n.componentId,s=n.isPostDate,u=n.parentId,p=n.isOtherTaxonomy,f=this.props.source,v=f.source,d=f.value,m=f.extra,g="views_shortcode"===v.value&&x.find((function(e){return e.value===d.value&&!!e.extra})),w=(t?t.extra.viewsAllowedFunctions:[]).map((function(e){return{value:e,label:e}})),b=(t?t.extra.viewsAllowedShortcodes:[]).map((function(e){return{value:e,label:e}})),h="date"===v.value&&S.find((function(e){return e.value===d.value})),_=E.filter((function(e){return!s||"date"!==e.value}));return React.createElement("div",null,this.state.error&&React.createElement(a.Notice,{status:"error",isDismissible:!1},Object(r.__)("Please, enter a valida data: ","wpv-views")+this.state.error),React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select...","wpv-views"),styles:this.reactSelectStyles,value:v.constructor===Object?v:null,options:_,onChange:function(t){return e.setConditionElement("source",t)}})),v&&!!v.value&&!!j[v.value]&&React.createElement(a.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},j[v.value])),"post"===v.value&&React.createElement(l.DynamicSourceUnified,{dynamicSourcesEligibleAttribute:this.getDSAttributes(),hideLabels:!0,clientId:u,componentId:i}),"post"===v.value&&!!d.source&&"post-taxonomies"===d.source&&React.createElement(a.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},Object(r.__)("This field returns taxonomy slugs","wpv-views"))),"value"===v.value&&React.createElement(a.BaseControl,null,React.createElement(a.TextControl,{value:d,onChange:function(t){return e.setConditionElement("value",t)},placeholder:p?Object(r.__)("Enter taxonomy slug","wpv-views"):Object(r.__)("Value","wpv-views")})),"function"===v.value&&React.createElement(o.Fragment,null,React.createElement(a.Notice,{status:"warning",isDismissible:!1},Object(r.__)("Functions need to be registered in Toolset -> Settings -> Front-end Content","wpv-views")),React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select a function...","wpv-views"),styles:this.reactSelectStyles,value:d.constructor===Object?d:null,options:w,onChange:function(t){return e.setConditionElement("value",t)}})),!!d&&!!d.value&&React.createElement(a.BaseControl,null,React.createElement(a.TextControl,{help:Object(r.__)("Comma separated values...","wpv-views"),value:m,onChange:function(t){return e.setConditionElement("extra",t)},placeholder:Object(r.__)("Parameters","wpv-views")}))),"custom_shortcode"===v.value&&React.createElement(o.Fragment,null,React.createElement(a.Notice,{status:"warning",isDismissible:!1},Object(r.__)("Shortcodes need to be registered in Toolset -> Settings -> Front-end Content","wpv-views")),React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select a shortcode...","wpv-views"),styles:this.reactSelectStyles,value:d.constructor===Object?d:null,options:b,onChange:function(t){return e.setConditionElement("value",t)}})),!!d&&!!d.value&&React.createElement(a.BaseControl,null,React.createElement(a.TextControl,{placeholder:Object(r.__)("Shortcode attributes","wpv-views"),value:m,onChange:function(t){return e.setConditionElement("extra",t)}}))),"views_shortcode"===v.value&&React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select a Views shortcode...","wpv-views"),styles:this.reactSelectStyles,value:d.constructor===Object?d:null,options:x,onChange:function(t){return e.setConditionElement("value",{value:t.value,label:t.label})}})),"views_shortcode"===v.value&&"wpv-search-term"===d.value&&React.createElement(a.BaseControl,null,React.createElement("p",{className:"components-base-control__help"},Object(r.__)("Returns the search value in the search results page of this site.","wpv-views"))),g&&React.createElement(a.BaseControl,null,React.createElement(c.Select,{styles:this.reactSelectStyles,value:m.constructor===Object?m:null,options:g.extra,onChange:function(t){return e.setConditionElement("extra",t)}})),"custom_user"===v.value&&React.createElement(a.BaseControl,null,React.createElement(c.AsyncSelect,{placeholder:Object(r.__)("Search an user...","wpv-views"),styles:this.reactSelectStyles,loadOptions:this.loadUsers.bind(this),defaultValue:d,onChange:function(t){return e.setConditionElement("value",t)}})),"custom_role"===v.value&&!!t&&React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select a role...","wpv-views"),styles:this.reactSelectStyles,value:d.constructor===Object?d:null,options:t.extra.listRoles,onChange:function(t){return e.setConditionElement("value",t)}})),"date"===v.value&&React.createElement(a.BaseControl,null,React.createElement(c.Select,{placeholder:Object(r.__)("Select a function...","wpv-views"),styles:this.reactSelectStyles,value:h&&h.constructor===Object?h:null,options:S,onChange:function(t){return e.setConditionElement("value",t)}})),"date"===v.value&&h&&!!h.extra&&h.extra.map((function(t,n){return React.createElement(a.BaseControl,{key:"extra-".concat(n)},React.createElement(a.TextControl,{placeholder:h?h.extra[0].placeholder:"",value:m,onChange:function(t){return e.setConditionElement("extra",t)}}))})))}}])&&m(t.prototype,n),s&&m(t,s),v}(o.Component),P=function(e){return!!e.value.source&&"post-taxonomies"===e.value.source},k=function(e){return e.value.constructor===Object&&!!e.value.is_repetitive};function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G={default:[{label:"=",value:"eq"},{label:">=",value:"gte"},{label:">",value:"gt"},{label:"<=",value:"lte"},{label:"<",value:"lt"},{label:"!=",value:"ne"},{label:Object(r.__)("Empty value","wpv-views"),value:"empty"}],taxonomies:[{label:"Contains",value:"contains"},{label:"Not contains",value:"not_contains"},{label:Object(r.__)("Empty value","wpv-views"),value:"empty"}],equivalent:[{value:"eq",label:"="},{value:"gte",label:">="},{value:"gt",label:">"},{value:"lte",label:"<="},{value:"lt",label:"<"},{value:"ne",label:"!="}]},L={firstArgument:{source:"post",value:R},operator:G.default[0],secondArgument:{source:"value",value:""}},$=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,a,i=M(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),B(U(t=i.call(this,e)),"reactSelectStyles",{menu:function(e){return T(T({},e),{},{position:"relative"})},placeholder:function(e){return T(T({},e),{},{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})},input:function(e,t){return T(T({},e),{},{"& input:focus":{boxShadow:(t.isFocused,"none !important")}})}}),!e.udpateConditionCallback)throw new Error("You must set udpateConditionCallback for <Condition />");return t}return t=s,(n=[{key:"setConditionElement",value:function(e,t){var n=this.props.condition;n[e]=t,"operator"===e&&"empty"===t.value&&(n.secondArgument=p(L.secondArgument));var r=G.taxonomies.find((function(e){return e.value===n.operator.value}));"operator"===e||!k(t)&&!P(t)||r||(n.operator=p(G.taxonomies[0])),this.props.udpateConditionCallback(p(n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.condition,a=t.componentId,i=t.parentId,s=t.onError,u=G,l=P(n.firstArgument)||P(n.secondArgument)||k(n.firstArgument)||k(n.secondArgument)?u.taxonomies:u.default,p=!!n.firstArgument.source&&"date"===n.firstArgument.source.value,f=!!n.firstArgument.value&&!!n.firstArgument.value.source&&["post-date","post-date-gmt","post-date-modified","post-date-modified-gmt"].includes(n.firstArgument.value.source),v="".concat(a,"-first")+("post"===n.firstArgument.source.value?(new Date).getTime():""),d="".concat(a,"-second")+("post"===n.secondArgument.source.value?(new Date).getTime():""),m=function(e){var t=e.source,n=e.value;return"post"===t.value&&!!n.source&&"post-taxonomies"===n.source};return React.createElement(o.Fragment,null,React.createElement(C,{key:v,source:n.firstArgument,udpateConditionCallback:function(t){return e.setConditionElement("firstArgument",t)},componentId:v,isDateFunction:!1,isPostDate:!1,parentId:i,isOtherTaxonomy:m(n.secondArgument),onError:s}),React.createElement("div",{className:"tb-condition__operator"},React.createElement(c.Select,{styles:this.reactSelectStyles,placeholder:Object(r.__)("Select an option","wpv-views"),value:n.operator,options:l,onChange:function(t){return e.setConditionElement("operator",t)}})),"empty"!==n.operator.value&&React.createElement(C,{key:d,source:n.secondArgument,udpateConditionCallback:function(t){return e.setConditionElement("secondArgument",t)},componentId:d,isDateFunction:p,isPostDate:f,parentId:i,isOtherTaxonomy:m(n.firstArgument),onError:s}))}}])&&D(t.prototype,n),a&&D(t,a),s}(o.Component),q=React.createElement(a.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},React.createElement("g",{transform:"scale(1.6)"},React.createElement(a.Path,{d:"M18 0H2C.9 0 0 .9 0 2v16c0 1.1.9 2 2 2H18c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM7 5.1c.3-.4.9-.4 1.2-.1.1.1.2.3.2.5 0 .3-.1.5-.3.7-.2.2-.4.3-.6.3-.2 0-.4-.1-.5-.2-.2-.2-.2-.4-.2-.6 0-.2.1-.4.2-.6zm-1.2 8.5c-.2 0-.4-.1-.5-.2-.2-.1-.3-.3-.3-.6 0-.6.3-1.9 1-4l-.7.7-.1.1-.7-.5.2-.2c.4-.5.9-.8 1.2-1.1.7-.4 1.2-.4 1.5-.2.1.1.2.3.2.4 0 .1 0 .2-.4 1.6-.5 1.6-.6 2.3-.7 2.6.1-.1.4-.3.8-.7l.2-.2.6.6-.2.2c-.6.6-1 .9-1.3 1.1-.4.3-.6.4-.8.4zm10.4-8.4c-.1.1-.3.2-.5.2s-.5 0-.9-.1c-.2 0-.3-.1-.4-.1-.2 0-.4.1-.6.4-.2.3-.4.8-.5 1.3L13.1 8h1.7l-.2 1h-1.7l-1 3.9c-.3 1.3-.8 2.3-1.6 2.9-.7.7-1.5 1-2.4 1-.3 0-.6-.1-.8-.2-.2-.2-.3-.4-.3-.6 0-.2.1-.4.2-.5.1-.1.3-.2.6-.2H8c.7.1 1.3.1 1.6-.2.1-.1.3-.4.5-1.3l1.2-4.9H9.8l.2-1h1.5c.2-1 .5-1.7.8-2.3.3-.6.8-1 1.4-1.3.6-.3 1.1-.5 1.6-.5.3 0 .6.1.7.2.2.2.3.4.3.6.1.3.1.4-.1.6z",fill:"#666"}))),J=React.createElement(a.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},React.createElement("g",{transform:"scale(1.6)"},React.createElement(a.Path,{d:"M13.5 0h-12C.675 0 0 .675 0 1.5v12c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5v-12c0-.825-.675-1.5-1.5-1.5zM5.25 3.825c.225-.3.675-.3.9-.075.075.075.15.225.15.375a.68.68 0 0 1-.225.525c-.15.15-.3.225-.45.225-.15 0-.3-.075-.375-.15-.15-.15-.15-.3-.15-.45 0-.15.075-.3.15-.45zm-.9 6.375c-.15 0-.3-.075-.375-.15-.15-.075-.225-.225-.225-.45 0-.45.225-1.425.75-3l-.525.525L3.9 7.2l-.525-.375.15-.15c.3-.375.675-.6.9-.825.525-.3.9-.3 1.125-.15.075.075.15.225.15.3 0 .075 0 .15-.3 1.2-.375 1.2-.45 1.725-.525 1.95.075-.075.3-.225.6-.525l.15-.15.45.45-.15.15c-.45.45-.75.675-.975.825-.3.225-.45.3-.6.3zm7.8-6.3c-.07.08-.225.15-.375.15s-.375 0-.675-.075c-.131-.034-.225-.075-.3-.075-.15 0-.3.075-.45.3-.15.225-.3.6-.375.975L9.825 6H11.1l-.15.75H9.675l-.75 2.925c-.225.975-.6 1.725-1.2 2.175a2.438 2.438 0 0 1-1.8.75c-.225 0-.45-.075-.6-.15-.15-.15-.225-.3-.225-.45 0-.15.075-.3.15-.375.075-.075.225-.15.45-.15H6c.525.075.975.075 1.2-.15.075-.075.225-.3.375-.975l.9-3.675H7.35l.15-.75h1.125c.15-.75.375-1.275.6-1.725s.6-.75 1.05-.975c.45-.225.825-.375 1.2-.375.225 0 .45.075.525.15.15.15.231.294.251.443.038.235.012.33-.101.457z",fill:"#666"}),React.createElement(a.Path,{d:"M18.5 5h-.96v10.922a1.5 1.5 0 0 1-1.5 1.5H5V18.5c0 .825.675 1.5 1.5 1.5h12c.825 0 1.5-.675 1.5-1.5v-12c0-.825-.675-1.5-1.5-1.5z",fill:"#666"})));function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(i,e);var t,n,o,c=H(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={showPopover:!1},t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.state.showPopover,n="tb-condition__appender",o=[n];return(this.props.forceVisible||t)&&o.push("".concat(n,"--visible")),React.createElement("div",{className:o.join(" ")},React.createElement("div",{className:"".concat(n,"__button")},React.createElement(a.Tooltip,{text:Object(r.__)("Add condition or group","wpv-views")},React.createElement(a.IconButton,{icon:"insert",onClick:function(){return e.setState({showPopover:!t})}})),t&&React.createElement(a.Popover,{className:"".concat(n,"__popover"),position:"top center",onClickOutside:function(){return e.setState({showPopover:!1})}},React.createElement(a.Button,{onClick:function(){e.props.onAddNewCondition(),e.setState({showPopover:!1})}},React.createElement("div",null,q),Object(r.__)("Condition","wpv-views")),React.createElement(a.Button,{onClick:function(){e.props.onAddNewGroup(),e.setState({showPopover:!1})}},React.createElement("div",null,J),Object(r.__)("(Group)","wpv-views")))))}}])&&Y(t.prototype,n),o&&Y(t,o),i}(o.Component),Z=function(e,t){return!e&&t?p(t):(e&&e.conditions||(e={conditions:[]}),e&&!e.conditions.length&&(e.conditions=[p(L)]),e)};function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var o=ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se={logic:{operator:"AND",conditions:[p(L)],negative:!1}},ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(s,e);var t,n,c,i=ae(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=i.call(this,e),!e.udpateConditionsCallback)throw new Error("You must set udpateConditionsCallback for <Condition />");return t.state={draggingIndex:null},t}return t=s,(n=[{key:"updateCondition",value:function(e,t){var n=this.props.logic;n.conditions[t]=e,this.props.udpateConditionsCallback(p(n))}},{key:"updateOperator",value:function(e){var t=this.props.logic;t.operator!==e&&(t.operator=e,this.props.udpateConditionsCallback(t))}},{key:"updateNegative",value:function(e){var t=this.props.logic;t.negative!==e&&(t.negative=e,this.props.udpateConditionsCallback(t))}},{key:"addNewCondition",value:function(e){var t=this.props.logic;t.conditions.splice(e,0,p(L)),this.props.udpateConditionsCallback(t)}},{key:"addNewGroup",value:function(e){var t=this.props,n=t.logic,r=t.udpateConditionsCallback,o=p(se.logic);o.conditions.push(p(L)),n.conditions.splice(e,0,o),r(n)}},{key:"isVisibleTrash",value:function(){var e=this.props,t=e.logic;return!(!e.parentPath.length&&1===t.conditions.length)}},{key:"deleteCondition",value:function(e){var t=this.props,n=t.logic,r=t.udpateConditionsCallback,o=t.onDeleteGrop;n.conditions=n.conditions.filter((function(t,n){return n!==e})),r(n),n.conditions.length||o()}},{key:"renderCondition",value:function(e,t){var n=this,c=this.props,i=c.logic,u=c.moveConditionsCallback,l=c.onDragStart,p=c.onDragStop,f=c.onMoveDown,v=c.onMoveUp,d=c.parentPath,m=c.componentId,g=c.parentId,w=c.onError,b=i.conditions,h=React.createElement(K,{forceVisible:!d.length&&b.length<2&&!b[0].conditions,onAddNewCondition:function(){return n.addNewCondition(t+1)},onAddNewGroup:function(){return n.addNewGroup(t+1)}});return e.conditions?React.createElement(o.Fragment,null,React.createElement(s,{logic:Z(e,se.logic),udpateConditionsCallback:function(e){n.updateCondition(e,t)},parentPath:[].concat(te(d),[t]),componentId:"".concat(m,"-").concat([].concat(te(d),[t]).join("-")),moveConditionsCallback:u,onDragStart:l,onDragEnd:p,onMoveDown:f,onMoveUp:v,onDeleteGrop:function(){return n.deleteCondition(t)},parentId:g,onError:w}),h):React.createElement("div",{className:"tb-condition__condition"},React.createElement("div",{className:"tb-condition__condition__toggler"},React.createElement("div",{className:"tb-condition__condition__arguments"},React.createElement($,{condition:e,udpateConditionCallback:function(e){n.updateCondition(e,t)},componentId:"".concat(m,"-condition-").concat(t),parentId:g,onError:w}))),React.createElement("div",null,this.isVisibleTrash()&&React.createElement(a.Tooltip,{text:Object(r.__)("Delete condition","wpv-views")},React.createElement(a.Button,{className:"tb-condition__action--delete",onClick:function(){return n.deleteCondition(t)}},React.createElement(a.Dashicon,{icon:"trash"})))),h)}},{key:"renderGroup",value:function(){var e=this,t=this.props,n=t.logic,c=t.parentPath,i=n.conditions,s=n.operator,u=n.negative,l={AND:Object(r.__)("AND","wpv-views"),OR:Object(r.__)("OR","wpv-views")},p="tb-condition__group",f="tb-condition-group_"+c.join("_");return React.createElement("div",{className:p},React.createElement("div",{className:"".concat(p,"__header")},n.conditions.length>1&&React.createElement(a.ButtonGroup,null,Object.keys(l).map((function(t){return React.createElement(a.Button,{key:"operator-".concat(t),isPrimary:t===s,isDefault:t!==s,onClick:function(){return e.updateOperator(t)}},l[t])}))),React.createElement(a.Tooltip,{className:"tb-tooltip",text:Object(r.__)("This switch allows to use condition as a negative (NOT)","wpv-views")},React.createElement("div",null,React.createElement(a.ToggleControl,{label:Object(r.__)("NOT","wpv-views"),checked:u,onChange:function(t){return e.updateNegative(t)},className:"tb-condition__toggle"})))),React.createElement("div",{className:"".concat(p,"__content")},i.filter((function(e){return null!==e})).map((function(t,n){var r="".concat(f,"-").concat(n);return React.createElement(o.Fragment,{key:"condition-".concat(n)},React.createElement("div",{className:"".concat(p,"__row")},React.createElement("div",{id:r},e.renderCondition(t,n))))}))))}},{key:"render",value:function(){return this.props.loading?React.createElement("div",{className:"wp-block-embed is-loading"},React.createElement(a.Spinner,null),React.createElement("p",null,Object(r.__)("Updating blocks..."))):React.createElement(o.Fragment,null,this.renderGroup())}}])&&re(t.prototype,n),c&&re(t,c),s}(o.Component),le=n("./node_modules/prop-types/index.js"),pe=n.n(le),fe=function(e){var t=function(e,t){var n={"post-content":"wpv-post-body","post-date":"wpv-post-date","post-date-gmt":"wpv-post-date","post-date-modified":'wpv-post-date type="modified"',"post-date-modified-gmt":'wpv-post-date type="modified"',"post-id":"wpv-post-id","post-name":"wpv-post-slug","post-status":"wpv-post-status","post-title":"wpv-post-title","post-title-with-link":"wpv-post-link","post-type":"wpv-post-type","post-url":"wpv-post-url","post-excerpt":"wpv-post-excerpt","author-id":'wpv-post-author format="meta" meta="ID"',"media-featured-image-data":'wpv-post-featured-image size="full" output="url"',"comments-number":"wpv-post-comments-number"};return n[e]?n[e]:t.value.source.match(/toolset_custom_field/)?"wpcf-".concat(e):'wpv-post-field name="'.concat(e,'"')};switch(e.source.value){case"post":var n=function(e){if(e.constructor!==Object||!e.provider)return"";var t=/^custom_post_type\|([^\|]+)\|(\d+)$/,n=e.provider.match(/^toolset_relationship\|([^\|]+)\|(parent|child)$/),r=e.provider.match(t);if("__current_post"===e.provider)return"";if("__custom_post"===e.provider){if(e.customPost){var o=e.customPost.value.match(t);return o?o[2]:""}return""}return n?"@".concat(n[1],".").concat(n[2]):r?r[2]:void 0}(e.value);if(!e.value.field)return e.value.source?"'[".concat(t(e.value.source,e)," ").concat(n?'item="'.concat(n,'"'):"","]'"):"''";if(e.value.is_repetitive){var r=t(e.value.field,e),o=n?'item="'.concat(n,'"'):"";return'ARRAY([wpv-for-each field="'.concat(r,'" ').concat(o," separator=\", \"]'[types field='").concat(e.value.field,"' ").concat(o.replace(/"/g,"'")," output='raw'][/types]'[/wpv-for-each])")}return"post-taxonomies"===e.value.source?"#(".concat(e.value.field,")").concat(n?".item(".concat(n,")"):""):"post-taxonomies-empty"===e.value.source?"'[wpv-post-taxonomy type=\"".concat(e.value.field,'" format="slug" ').concat(n?'item="'.concat(n,'"'):"","]'"):"$(".concat(t(e.value.field||e.value.source,e),")").concat(n?".item(".concat(n,")"):"");case"current_role":return"'[wpv-current-user info=\"role\"]'";case"custom_user":return"'[wpv-user id=\"".concat(e.value.value,'" field="ID"]\'');case"current_user":return"'[wpv-current-user info=\"id\"]'";case"custom_role":return"'".concat(e.value.value?e.value.value.replace("'","\\'"):"","'");case"value":return"'".concat(e.value.replace("'","\\'"),"'");case"views_shortcode":return"'[".concat(e.value.value," ").concat(e.extra.value?e.extra.value:"","]'");case"function":return"".concat(e.value.value,"(").concat(e.extra,")");case"custom_shortcode":return"'[".concat(e.value.value," ").concat(e.extra,"]'");case"date":return e.value?"".concat(e.value.value.toUpperCase(),"(").concat(e.extra,")"):"";default:return"''"}},ve=function(e){if(!e||!e.operator)return"";if(e.conditions)return de(e);if("empty"===e.operator.value)return e.operator.value+"( "+("post"===(n=e.firstArgument).source.value&&"post-taxonomies"===n.value.source&&(n.value.source="post-taxonomies-empty"),fe(n)+")");if(["contains","not_contains"].includes(e.operator.value)){var t=P(e.firstArgument)||k(e.firstArgument)?"CONTAINS( "+fe(e.firstArgument)+", "+fe(e.secondArgument)+" )":"CONTAINS( "+fe(e.secondArgument)+", "+fe(e.firstArgument)+" )";return"not_contains"===e.operator.value?"NOT(".concat(t,")"):t}var n;return"( "+fe(e.firstArgument)+" ".concat(e.operator.value," ")+fe(e.secondArgument)+" )"},de=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.constructor===String)return t?'[wpv-conditional if="'.concat(e,'" ').concat(n?'debug="true"':"","][/wpv-conditional]"):e;var r=e.conditions.map((function(e){return ve(e)})).join(" ".concat(e.operator," ")),o=e.negative?"NOT":"",a=" ".concat(o," ( ").concat(r," ) ");return t?'[wpv-conditional if="'.concat(a,'" ').concat(n?'debug="true"':"","][/wpv-conditional]"):a};function me(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){me(a,r,o,c,i,"next",e)}function i(e){me(a,r,o,c,i,"throw",e)}c(void 0)}))}}var we=function(){var e=window,t=e.toolsetDynamicSourcesScriptData,n=e.toolsetBlocksStrings,r=S.map((function(e){return e.value})),o=/(empty|not_contains|contains|not)\s*\(/i,a=new RegExp(o,"gi"),c=/\'\[(wpv-archive-title|wpv-found-count|wpv-items-count|wpv-loop-index|wpv-search-term)([^\]]*)\]\'/,i=new RegExp(c,"g"),s=/\'(\[wpv-bloginfo[^\]]*(show="[^\]]*")[^\]]*\])\'/,u=new RegExp(s,"g"),l=/\'(\[wpv-post-taxonomy[^\]]*type="([^\"]*)"[^\]]*\])\'/,p=new RegExp(l,"g"),f=/\'\[wpv-([^\]|\s]+)[^\]]*\]\'/,v=new RegExp(f,"g"),d=/\$\(([^\)]+)\)(\.item\(([^\)]+)\))?/,m=new RegExp(d,"g"),g=/\'\[types[^\]]*field="([^"]+)"[^\]]*\](?:\[\/types\])?\'/,w=new RegExp(g,"g"),b=/#\(([^\)]+)\)(\.item\(([^\)]+)\))?/,h=new RegExp(b,"g"),_=/'\[wpv-user((?=[^\]]*id="(\d+)")|(?=[^\]]*field="ID"))[^\]]*\]'/,y=new RegExp(_,"g"),O="(?:OR|AND|empty|=|>=|>|<=|<|!=|eq|ne|gt|gte|lt|lte)",R=new RegExp("(?:\\s+".concat(O,"\\s+|\\(|^)\\s*('(?:[^'\\\\]|\\\\.)*')|('(?:[^'\\\\]|\\\\.)*')\\s*(?:\\s+").concat(O,"\\s+|\\)|$)"),"i"),x=new RegExp(R,"g"),E=new RegExp("(?:\\s+".concat(O,"\\s+|\\(|^)\\s*([\\w\\d_]+)|([\\w\\d_]+)\\s*(?:\\s+").concat(O,"\\s+|\\)|$)"),"i"),j=new RegExp(E,"ig"),C=new RegExp("(".concat(r.join("|"),")\\(([^)]*)\\)"),"i"),P=new RegExp(C,"gi"),k=new RegExp("(".concat(n.extra.viewsAllowedFunctions.join("|"),")\\(([^)]*)\\)")),A=new RegExp(k,"g"),N=new RegExp("'\\[(".concat(n.extra.viewsAllowedShortcodes.join("|"),")([^\\]]*)\\]'")),T=/(~~[^~~]*~~)\s*(=|>=|>|<=|<|!=|eq|ne|gt|gte|lt|lte)\s*(~~[^~~]*~~)/;return{dsData:t,simpleOperatorsRegExp:o,operatorsRegExp:a,repeatingFieldRegExp:/ARRAY\s*\(\s*\[wpv-for-each.*field="wpcf-([^"]+)"[^\]]*\]'\s*\[types[^\]]+\]\[\/types\]'\s*\[\/wpv-for-each\]\s*\)/gi,currentRoleRegExp:/\'\[wpv-current-user info="role"\]\'/g,currentUserRegExp:/\'\[wpv-current-user info="id"\]\'/g,currentUserDataRegExp:/\'\[wpv-current-user[^\]]*\]\'/g,simpleViewsShortcodeRegExp:c,viewsShortcodeRegExp:i,simpleBlogInfoRegExp:s,blogInfoRegExp:u,simpleTypesTaxonomyRegExp:l,typesTaxonomyRegExp:p,simplePostDataRegExp:f,postDataRegExp:v,simpleFieldRegExp:d,fieldRegExp:m,simpleTypesFieldRegExp:g,typesFieldRegExp:w,simpleTaxonomyRegExp:b,taxonomyRegExp:h,simpleCustomUserRegExp:_,customUserRegExp:y,operators:O,simpleQuotedValueRegExp:R,quotedValueRegExp:x,simpleUnquotedValueRegExp:E,unquotedValueRegExp:j,simpleDateFunctionRegExp:C,dateFunctionRegExp:P,simpleCustomFunctionRegExp:k,customFunctionRegExp:A,simpleCustomShortcodeRegExp:N,customShortcodeRegExp:new RegExp(N,"g"),containsRegExp:/%%CONTAINS%%\(\s*(~~[^~~]*~~)\s*,\s*(~~[^~~]*~~)\s*\)/gi,notContainsRegExp:/%%NOT_CONTAINS%%\(\s*(~~[^~~]*~~)\s*,\s*(~~[^~~]*~~)\s*\)/gi,emptyRegExp:/%%empty%%\(\s*(~~[^~~]*~~)\s*\)/gi,notRegExp:/%%not%%/gi,simpleLogicalConditionRegExp:T,logicalConditionRegExp:new RegExp(T,"gi"),itemRegExp:/item="([^"]+)"|\.item\(([^\)]+)\)/,relationshipProviderRegExp:/^@([a-z_-]+)\.([a-z_-]+)$/i}},be=function(){var e=ge(regeneratorRuntime.mark((function e(t,n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],t.replace(n,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var c=r.apply(void 0,[e].concat(n));o.push(c)})),e.next=4,Promise.all(o);case 4:return a=e.sent,e.abrupt("return",t.replace(n,(function(){return a.shift()})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),he=function(e){return JSON.stringify(E.find((function(t){return t.value===e})))},_e=function(e){return JSON.stringify(G.default.find((function(t){return t.value===e}))||G.taxonomies.find((function(t){return t.value===e}))||G.equivalent.find((function(t){return t.label===e})))},ye=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.match(we().itemRegExp))){e.next=18;break}if(!(r=n[1]||n[2]).match(we().relationshipProviderRegExp)){e.next=5;break}return e.abrupt("return",r.replace(we().relationshipProviderRegExp,'"toolset_relationship|$1|$2"'));case 5:if(!Number(r)){e.next=18;break}return e.next=8,u()({path:"/toolset-dynamic-sources/v1/search-post/?id=".concat(r)});case 8:if(o=e.sent,!(a=we().dsData.postProviders.find((function(e){return e.value.match(new RegExp("custom_post_type\\|[^|]+\\|".concat(r)))})))){e.next=12;break}return e.abrupt("return",'"__custom_post","customPost":{"label":"'.concat(o[0].title,'","value":"').concat(a.value,'"}'));case 12:if(!o.length){e.next=17;break}return c="custom_post_type|".concat(o[0].post_type,"|").concat(o[0].id),e.next=16,Object(l.loadSourceFromCustomPost)({label:o[0].title,value:c});case 16:return e.abrupt("return",'"__custom_post","customPost":{"label":"'.concat(o[0].title,'","value":"').concat(c,'"}'));case 17:case 18:return e.abrupt("return",'"__current_post"');case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e){return e&&"__custom_post"===e.value&&e.customPost?e.customPost.value:e},Re=function(e){return e.replace(/^.*"value":"([^"]+)".*$/,"$1").replace(/^"(.*)"$/,"$1")},xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toolset",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=null;if(r){if(we().dsData.hasOwnProperty("dynamicSourcesForViews"))for(var a in we().dsData.dynamicSourcesForViews)if(we().dsData.dynamicSourcesForViews[a].hasOwnProperty(t)){o=we().dsData.dynamicSourcesForViews[a][t];break}}else o=we().dsData.dynamicSources[t];if(!o)return"";var c=o.find((function(e){return e.id===n}));if(!c)return"";var i=c.options.find((function(t){return t.fields.find((function(t){return t.value===e}))||t.value===e}));return i?i.value:""},Ee=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().repeatingFieldRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,r=t.match(/field="wpcf-([^"]+)"/),o=Oe(n),a=Re(o),c=xe(r[1],a),e.abrupt("return",'~~"##ARGUMENT##": { "source": '.concat(he("post"),', "value": {"provider": ').concat(n,', "is_repetitive": true, "source": "').concat(c,'", "field": "').concat(r[1],'" } } ~~'));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){return e.replace(we().operatorsRegExp,(function(e){var t=e.match(we().simpleOperatorsRegExp);return e.replace(t[1],"%%".concat(t[1],"%%"))}))},Se=function(e){return e.replace(we().currentRoleRegExp,'~~"##ARGUMENT##": { "source": '.concat(he("current_role"),', "value": "", "extra": "" } ~~'))},Ce=function(e){return e.replace(we().currentUserRegExp,'~~"##ARGUMENT##": { "source": '.concat(he("current_user"),', "value": "", "extra": "" } ~~'))},Pe=function(e){return e.replace(we().currentUserDataRegExp,'~~"##ARGUMENT##": { "source": '.concat(he("current_user"),', "value": "", "extra": "" } ~~'))},ke=function(e){return e.replace(we().viewsShortcodeRegExp,(function(e){var t=e.match(we().simpleViewsShortcodeRegExp),n=x.find((function(e){return e.value===t[1]})),r=t[2]?JSON.stringify({value:t[2]}):"";return'~~"##ARGUMENT##": { "source": '.concat(he("views_shortcode"),', "value": ').concat(JSON.stringify(n),', "extra": ').concat(r," } ~~")}))},Ae=function(e){return e.replace(we().blogInfoRegExp,(function(e){var t=e.match(we().simpleBlogInfoRegExp),n=x.find((function(e){return"wpv-bloginfo"===e.value})),r=n.extra.find((function(e){return e.value===t[2]}));return'~~"##ARGUMENT##": { "source": '.concat(he("views_shortcode"),', "value": ').concat(JSON.stringify({value:n.value,label:n.label}),', "extra": ').concat(JSON.stringify(r)," } ~~")}))},Ne=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().typesTaxonomyRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,r=t.match(we().simpleTypesTaxonomyRegExp),o=r[2],a=Oe(n),c=Re(a),"post",i=xe(o,c,"post"),e.abrupt("return",t.replace(we().typesTaxonomyRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(n,', "source": "').concat(i,'", "field": "').concat(o,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().postDataRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:n=e.sent,r=t.match(we().simplePostDataRegExp),o=function(e){return t.replace(we().postDataRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(n,', "source": "').concat(e,'", "is_repetitive": false } } ~~'))},e.t0=r[1],e.next="bloginfo"===e.t0?8:"post-author"===e.t0?10:"post-featured-image"===e.t0?16:"post-slug"===e.t0?17:"post-link"===e.t0?18:"post-comments-number"===e.t0?19:"post-field"===e.t0?20:"post-taxonomy"===e.t0?24:"post-format"===e.t0||"post-class"===e.t0||"post-edit-link"===e.t0||"post-menu-order"===e.t0||"post-previous-link"===e.t0||"post-next-link"===e.t0||"user"===e.t0?28:29;break;case 8:return a=x.find((function(e){return"wpv-bloginfo"===e.value})),e.abrupt("return",'~~"##ARGUMENT##": { "source": '.concat(he("views_shortcode"),', "value": ').concat(JSON.stringify({value:a.value,label:a.label}),', "extra": ').concat(JSON.stringify(a.extra[1])," } ~~"));case 10:if(c=t.match(/meta="([^"]+)"/),i=function(e){return e||"display_name"!==e[1]?"ID"===e[1]&&"author-id":"author-name"}(c)){e.next=15;break}return e.abrupt("return",t);case 15:return e.abrupt("return",t.replace(we().postDataRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(n,', "source": "').concat(i,'", "is_repetitive": false } } ~~')));case 16:return e.abrupt("return",o("media-featured-image-data"));case 17:return e.abrupt("return",o("post-name"));case 18:return e.abrupt("return",o("post-title-with-link"));case 19:return e.abrupt("return",o("comments-number"));case 20:if(s=t.match(/name="([^"]+)"/)){e.next=23;break}return e.abrupt("return",t);case 23:return e.abrupt("return",o(s[1]));case 24:if(u=t.match(/type="([^"]+)"/)){e.next=27;break}return e.abrupt("return",t);case 27:return e.abrupt("return",o('post-taxonomies", field="'.concat(u[1])));case 28:return e.abrupt("return",t);case 29:return e.abrupt("return",o(r[1]));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=ge(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().fieldRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var r,o,a,c,i,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return r=e.sent,o=t.match(we().simpleFieldRegExp),a=o[1].replace(/(wpcf|wpv)-/,""),c=Oe(r),i=Re(c),s=o[1].match(/^wpcf-.*$/)?"toolset":"metabox",u=xe(a,i,s,n),l=u?'"source": "'.concat(u,'", "field": "').concat(a,'"'):'"source": "'.concat(a,'", "field": ""'),e.abrupt("return",t.replace(we().fieldRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(r,", ").concat(l,', "is_repetitive": false } } ~~')));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().typesFieldRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,r=t.match(we().simpleTypesFieldRegExp),o=r[1],a=Oe(n),c=Re(a),"toolset",i=xe(o,c,"toolset"),e.abrupt("return",t.replace(we().typesFieldRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(n,', "source": "').concat(i,'", "field": "').concat(o,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Me=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().taxonomyRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t);case 2:return n=e.sent,r=t.match(we().simpleTaxonomyRegExp),o=r[1],a=Oe(n),c=Re(a),"post",i=xe(o,c,"post"),e.abrupt("return",t.replace(we().taxonomyRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("post"),', "value": { "provider": ').concat(n,', "source": "').concat(i,'", "field": "').concat(o,'", "is_repetitive": false } } ~~')));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t,we().customUserRegExp,function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.match(we().simpleCustomUserRegExp),e.next=3,wp.apiFetch({path:"/wp/v2/users/".concat(n[2])});case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return","");case 6:return e.abrupt("return",t.replace(we().customUserRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("custom_user"),', "value": { "label": "').concat(r.name,'", "value": ').concat(r.id,' }, "extra": "" } ~~')));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e){return e.replace(we().dateFunctionRegExp,(function(e){var t=e.match(we().simpleDateFunctionRegExp),n=S.find((function(e){return e.value===t[1].toLowerCase()}));return e.replace(we().dateFunctionRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("date"),', "value": { "value": "').concat(n.value,'", "label": "').concat(n.label,'" }, "extra": "').concat(t[2].replace(/"|'/g,""),'" } ~~'))}))},Ve=function(e){return e.replace(we().customFunctionRegExp,(function(e){var t=e.match(we().simpleCustomFunctionRegExp);return e.replace(we().customFunctionRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("function"),', "value": { "value": "').concat(t[1],'", "label": "').concat(t[1],'" }, "extra": "').concat(t[2].replace(/"/g,'\\"'),'" } ~~'))}))},Be=function(e){return e.replace(we().customShortcodeRegExp,(function(e){var t=e.match(we().simpleCustomShortcodeRegExp);return e.replace(we().customShortcodeRegExp,'~~"##ARGUMENT##": {"source": '.concat(he("custom_shortcode"),', "value": { "value": "').concat(t[1],'", "label": "').concat(t[1],'" }, "extra": "').concat(t[2].replace(/"/g,'\\"'),'" } ~~'))}))},Ge=function(e){return e.replace(we().quotedValueRegExp,(function(e){var t=e.match(we().simpleQuotedValueRegExp),n=t[1]||t[2],r=n.replace(/\\\'/g,"'").replace(/"/g,'\\"').replace(/^\'(.*)\'$/,"$1");return e.replace(n,'~~"##ARGUMENT##": { "source": '.concat(he("value"),', "value": "').concat(r,'", "extra": "" } ~~'))}))},Le=function(e){return e.replace(we().unquotedValueRegExp,(function(e){var t=e.match(we().simpleUnquotedValueRegExp),n=t[1]||t[3];return e.replace(n,'~~"##ARGUMENT##": { "source": '.concat(he("value"),', "value": "').concat(n,'", "extra": "" } ~~'))}))},$e=function(e){return e.replace("##ARGUMENT##","firstArgument").replace("##ARGUMENT##","secondArgument").replace(/~~/g,"")},qe=function(e){return e.replace(we().containsRegExp,(function(e){var t=e.replace(we().containsRegExp,'^^{$1, "operator": '.concat(_e("contains"),", $2}^^"));return $e(t)}))},Je=function(e){return e.replace(we().notContainsRegExp,(function(e){var t=e.replace(we().notContainsRegExp,'^^{$1, "operator": '.concat(_e("not_contains"),", $2}^^"));return $e(t)}))},We=function(e){return e.replace(we().emptyRegExp,(function(e){var t=e.replace(we().emptyRegExp,'^^{$1, "operator": '.concat(_e("empty"),', "secondArgument": ').concat(JSON.stringify(L.secondArgument)," }^^"));return $e(t)}))},Ye=function(e){return e.replace(we().notRegExp,"NOT")},ze=function(e){return e.replace(we().logicalConditionRegExp,(function(e){var t=e.match(we().simpleLogicalConditionRegExp),n=_e(t[2]),r=e.replace(we().logicalConditionRegExp,'^^{$1, "operator": '.concat(n,", $3}^^"));return $e(r)}))},He=[],Qe=function(e){var t=!1,n=e.replace(/\(\s*\^\^/g,"(^^").replace(/\^\^\s*\)/g,"^^)");do{t=!1,n=n.replace(/\^\^[^\^\^]*\^\^/g,(function(e){return He.push(e.replace(/\^\^/g,"")),t=!0,"CONDITION"}))}while(t);for(var r=/(\(\s*){2}CONDITION(\s*\)){2}/g;n.match(r);)n=n.replace(r,"(CONDITION)");return n},Xe=function(e){e.match(/.*\(.*\).*/)||(e=" ( ".concat(e," ) "));var t=0;return function n(){var r=[],o=t;function a(){t-1>o&&r.push(e.slice(o,t-1))}for(;t<e.length;)switch(e[t++]){case" ":a(),o=t;continue;case"(":r.push(n()),o=t;continue;case")":return a(),r}return a(),r}()},Ke=function e(t,n){if(!n&&t.constructor===Array&&1===t.length)return e(t[0]);if(t.constructor===String)return t;var r="",o=!1,a=t.filter((function(e,n){return e.constructor===String&&e.match(/^and|or$/i)?(r=e.toUpperCase(),!1):"!"===e?(o=!0,!1):!("NOT"===e&&t.length>=n+1&&t[n+1].constructor===Array)||(t[n+1].unshift("!"),!1)})).map((function(t){return e(t,!1)}));return{operator:r,conditions:a,negative:o}},Ze=function(e){var t=JSON.stringify(e);t=t.replace(/"CONDITION"/g,"CONDITION").replace(/^\[(.*)\]$/,"$1");var n=!1;do{n=!1,t=t.replace(/CONDITION/,(function(){return n=!0,He.shift()}))}while(n);try{return JSON.parse(t)}catch(e){throw"Error parsing conditions"}},et=function e(t){return t.conditions&&(t.operator||(t.operator="AND"),t.conditions.forEach((function(t){return e(t)}))),t},tt=function e(t){if(t.conditions){if(1===t.conditions.length&&t.conditions[0].conditions)return t.conditions[0];t.conditions.map((function(t){return t.conditions?e(t):t}))}return t},nt=function(){var e=ge(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.prev=1,r=je(t),e.next=5,Ee(r);case 5:return r=e.sent,e.next=8,Fe(r);case 8:return r=e.sent,r=Se(r),r=Ce(r),r=Pe(r),r=ke(r),r=Ae(r),e.next=16,Ne(r);case 16:return r=e.sent,e.next=19,Te(r);case 19:return r=e.sent,e.next=22,De(r,n);case 22:return r=e.sent,e.next=25,Ie(r);case 25:return r=e.sent,e.next=28,Me(r);case 28:return r=e.sent,r=Ue(r),r=Ve(r),r=Be(r),r=Ge(r),r=Le(r),r=qe(r),r=Je(r),r=We(r),r=Ye(r),r=ze(r),r=Qe(r),r=Xe(r),r=Ke(r,!0),r=Ze(r),r=et(r),r=tt(r),e.abrupt("return",r);case 48:return e.prev=48,e.t0=e.catch(1),e.abrupt("return",!1);case 51:case"end":return e.stop()}}),e,null,[[1,48]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){window.CodeMirror.modes["wpv-conditionals"]||window.CodeMirror.defineMode("wpv-conditionals",(function(){var e="";return{startState:function(){return{inString:!1,matchedQuote:null,inShortcode:!1,isShortcodeSlug:!1}},token:function(t,n){var r,o=t.next(),a=null;if(["'",'"'].includes(o)){var c=(r=o,n.matchedQuote===o?(n.inString=!1,n.matchedQuote=null,"tb-quotes"):n.matchedQuote?null:("["===t.peek()||"]"===e?n.inShortcode="]"!==e:(n.inString=!0,n.matchedQuote=r),"tb-quotes"));c&&(a=c)}else n.inString?n.inString&&(a="tb-string"):t.match(/(?:\$|#)\([^\)]*\)/)?a="tb-field":t.match(/item\([^\)]*\)/)?a="tb-item":["(",")"].includes(o)?(")"===o&&(n.isFieldOrTaxonomy=!1),a="tb-parentheses"):a||"["!==o?n.inShortcode&&" "===o?(n.isShortcodeSlug=!1,a=null):n.inShortcode&&t.match(/[\w_-]+/)?a=n.isShortcodeSlug?"tb-shortcode-slug":"tb-shortcode-attribute":"]"===o?(n.inShortcode=!1,n.isShortcodeSlug=!1,a="tb-bracket"):t.match(new RegExp("".concat(["CONTAINS","NOTCONTAINS","EMPTY","ARRAY","AND","OR"].join("|")),"i"))&&(a="tb-keyword"):(n.inShortcode=!0,n.isShortcodeSlug=!0,a="tb-bracket");return e=o,a}}}))};n("./public_src/components/conditionals/utils/views-shortcode.js");function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=lt(e);if(t){var o=lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(s,e);var t,n,c,i=st(s);function s(){return at(this,s),i.apply(this,arguments)}return t=s,(n=[{key:"getCodeMirrorId",value:function(){var e=this.props.codeMirrorId;return"codemirror-".concat(e)}},{key:"componentDidMount",value:function(){var e=this,t=document.getElementById(this.getCodeMirrorId());rt(),this.codemirror=window.CodeMirror.fromTextArea(t,{lineWrapping:!0,scrollbarStyle:"null",viewportMargin:1/0,mode:"wpv-conditionals",matchBrackets:!0,highlightMatches:!0}),this.codemirror.on("change",(function(){e.props.onConditionsUpdate(e.codemirror.getValue())}))}},{key:"componentWillUnmount",value:function(){this.props.onClose(this.codemirror.getValue()),this.codemirror.toTextArea()}},{key:"viewsConditionalButton",value:function(){var e=this;return window.toolsetBlocksStrings.extra.isViewsEnabled?"undefined"==typeof WPV_Toolset||"undefined"==typeof WPViews||void 0===WPViews.shortcodes_gui||"function"!=typeof WPViews.shortcodes_gui.wpv_insert_popup_conditional||"undefined"==typeof icl_editor_localization_texts||void 0===icl_editor_localization_texts.wpv_insert_conditional_shortcode||void 0===icl_editor_localization_texts.wpv_editor_callback_nonce?null:React.createElement("div",{className:"tb-condition__advanced-editor-buttons"},React.createElement(a.Tooltip,{text:Object(r.__)("Add Types or Views shortcode","wpv-views")},React.createElement(a.Button,{className:"components-button tb-icon-button tb-fields-and-text-toolbar-views-add-conditional",onClick:function(){e.codemirror.focus(),window.wpcfActiveEditor=e.getCodeMirrorId(),Toolset.hooks.doAction("toolset-action-set-shortcode-gui-action","insert"),WPViews.shortcodes_gui.open_fields_and_views_dialog()}},React.createElement("i",{className:"icon-views-logo fa fa-wpv-paragraph ont-icon-24"})))):null}},{key:"render",value:function(){var e=this.props,t=e.logic,n=e.parsedConditions,a=e.forceUseParsedConditions;return React.createElement(o.Fragment,null,this.viewsConditionalButton(),React.createElement("textarea",{id:this.getCodeMirrorId(),defaultValue:a?n:ve(t)}),React.createElement("p",{dangerouslySetInnerHTML:{__html:Object(r.sprintf)(Object(r.__)('You can set up the condition manually using the <a href="%s" target="_blank" class="tb-external-link">Views shortcode</a>. <br />Please, write only the expression that will be included in the <strong>if</strong> attribute of the <strong>wpv-conditional</strong> shortcode: <em>[wpv-conditional if="(your expression)"]</em>.',"wpv-views"),"https://toolset.com/course-lesson/using-toolset-conditional-block/?utm_source=plugin&utm_medium=gui&utm_campaign=blocks")}}))}}])&&ct(t.prototype,n),c&&ct(t,c),s}(o.Component);function ft(e){var t=function(e){if(!e||!e.source||"post"===e.source)return!0;switch(e.source.value){case"post":if(!e.value)return!0;if(!e.value.source&&!e.value.field&&!e.value.customPost)return!0;break;case"views_shortcode":if(!e.value)return!0;var t=x.find((function(t){return t.value===e.value.value}));if(!t)return!0;if(t.extra){if(!e.extra)return!0;if(!t.extra.find((function(t){return t.value===e.extra.value})))return!0}break;case"custom_shortcode":case"function":case"custom_user":if(!e.value)return!0;break;case"custom_role":if(!e.value)return!0;if(!window.toolsetBlocksStrings.extra.listRoles.find((function(t){return t.value===e.value.value})))return!0;break;case"date":if(!e.value)return!0}return!1};return e.conditions?!!e.conditions.find((function(e){return!0===ft(e)})):t(e.firstArgument)||t(e.secondArgument)}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t,n,r,o,a,c){try{var i=e[a](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,o)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(i,e);var t,n,o,c=wt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=c.call(this,e)).state={isLoading:!1,conditions:e.conditions?e.conditions:p(se.logic),parsedConditions:e.parsedConditions?e.parsedConditions:"",modalOpened:!0,isAdvanced:!!e.advancedEditor&&e.advancedEditor,thereIsAParsingError:!1,incompleteWarning:!1,confirmationEditorModeOpened:!1},t}return t=i,(n=[{key:"isValidConditions",value:function(e){return!JSON.stringify(e).match("##ARGUMENT##")}},{key:"confirmEditorMode",value:function(){var e=this.state.isAdvanced,t=this.props.toggleAdvancedEditor;e?this.setState({confirmationEditorModeOpened:!0}):(this.setState({isAdvanced:!e}),t&&t())}},{key:"modalEditorMode",value:function(){var e=this,t=this.state,n=t.confirmationEditorModeOpened,o=t.isAdvanced,c=Object(r.__)("Switch to Visual Editor?","wpv-views"),i=Object(r.__)("Some conditions might be lost if you switch back to Visual Editor","wpv-views");return n&&React.createElement(a.Modal,{title:c,isDismissable:!1},React.createElement("p",null,i),React.createElement("div",{className:"tb-condition__modal__buttons"},React.createElement(a.Button,{isDefault:!0,isLarge:!0,onClick:function(){return e.setState({confirmationEditorModeOpened:!1})}},Object(r.__)("Cancel","wpv-views")),React.createElement(a.Button,{isPrimary:!0,isLarge:!0,onClick:function(){e.setState({confirmationEditorModeOpened:!1,isAdvanced:!o})}},Object(r.__)("Accept","wpv-views"))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.clientId,o=t.onCancel,c=t.onChange,i=t.getOnlyConditions,s=t.debug,u=t.isInsideViewEditor,l=this.state,f=l.conditions,v=l.parsedConditions,d=l.isAdvanced,m=React.createElement("div",{className:"tb-condition__modal__header"},React.createElement("span",null,Object(r.__)("Edit conditions","wpv-views")),React.createElement(a.ToggleControl,{label:Object(r.__)("Advanced Editor","wpv-views"),checked:d,onChange:function(){return e.confirmEditorMode()},className:"tb-condition__toggle"})),g=function(t){return ft(t)?(e.setState({incompleteWarning:!0}),!1):!(!t||!e.isValidConditions(t))||(e.setState({thereIsAParsingError:!0}),!1)};return React.createElement(React.Fragment,null,React.createElement("div",null,React.createElement(a.Modal,{className:"tb-condition__modal",title:m,onRequestClose:function(){return o()},shouldCloseOnClickOutside:!1},this.state.thereIsAParsingError&&React.createElement(a.Notice,{status:"error",onRemove:function(){return e.setState({thereIsAParsingError:!1})}},Object(r.__)("There is an error in the conditions, please check them","wpv-views")),this.state.incompleteWarning&&React.createElement(a.Notice,{status:"warning",onRemove:function(){return e.setState({incompleteWarning:!1})}},Object(r.__)("Please, complete all the conditions or remove them","wpv-views")),!d&&React.createElement(ue,{logic:f,loading:this.state.isLoading,udpateConditionsCallback:function(t){e.setState({conditions:p(t),parsedConditions:de(t)})},parentPath:[],componentId:"".concat(n,"-group"),parentId:n,onError:function(t){return e.setState({thereIsAnError:t})}}),d&&React.createElement(pt,{codeMirrorId:n,logic:f,parsedConditions:v,onConditionsUpdate:function(t){e.setState({parsedConditions:t})},onClose:function(){}}),this.props.children,React.createElement("div",{className:"tb-condition__modal__buttons"},React.createElement(a.Button,{isDefault:!0,isLarge:!0,onClick:function(){return o()}},Object(r.__)("Cancel","wpv-views")),React.createElement(a.Button,{isPrimary:!0,isLarge:!0,onClick:function(){if(d)e.setState({isLoading:!0}),new Promise(function(){var t,n=(t=regeneratorRuntime.mark((function t(n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt(v,u);case 2:o=t.sent,g(o)||r(o),o&&e.isValidConditions(o)?n(o):r(o);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(e){dt(a,r,o,c,i,"next",e)}function i(e){dt(a,r,o,c,i,"throw",e)}c(void 0)}))});return function(e,t){return n.apply(this,arguments)}}()).then((function(t){e.setState({conditions:void 0,parsedConditions:""}),c(p(t),de(v,!i,s))})).catch((function(){e.setState({isLoading:!1}),setTimeout((function(){return e.setState({thereIsAParsingError:!1,incompleteWarning:!1})}),15e3)}));else{var t=de(f,!i,s);g(f)&&c(f,t)}}},Object(r.__)("Accept","wpv-views"))))),this.modalEditorMode())}}])&&mt(t.prototype,n),o&&mt(t,o),i}(o.Component);_t.propTypes={clientId:pe.a.string.isRequired,onCancel:pe.a.func.isRequired,onChange:pe.a.func.isRequired,conditions:pe.a.object,parsedConditions:pe.a.string,getOnlyConditions:pe.a.bool,debug:pe.a.bool},_t.defaultProps={getOnlyConditions:!0,debug:!1};var yt=window.toolsetDynamicSourcesScriptData,Ot=function(e,t){var n="";if(t){for(var r in yt.postProvidersForViews)if(n=yt.postProvidersForViews[r].find((function(t){return t.value===e})))return n.label}else n=yt.postProviders.find((function(t){return t.value===e}));return n?n.label:""},Rt=function(e){return!!e.provider&&("__custom_post"===e.provider&&e.customPost&&e.customPost.value?e.customPost.value:e.provider)},xt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Rt(e),o=t?Object.values(yt.dynamicSourcesForViews):[yt.dynamicSources],a=null;return o.forEach((function(t){n&&t[n]&&!a&&t[n].some((function(t){return!(!t.options&&!a)&&(t.options.some((function(t){return t.value===e.source&&(t.fields&&(t.fields.some((function(t){return t.value===e.field&&(a=Object(r.sprintf)(Object(r.__)("Field <strong>%s</strong>","wpv-views"),t.label),!0)})),a)||(a="<strong>".concat(t.label,"</strong>")),!0)})),!!a||void 0)}))})),a},Et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=window,a=o.toolsetBlocksStrings,c=t?Object(r.__)("The result of %s","wpv-views"):Object(r.__)("the result of %s","wpv-views");if(!e||!e.source)return"";switch(e.source.value){case"post":var i=Ot(Rt(e.value),n),s=xt(e.value,n);return!(!i||!s)&&"".concat(s," from <strong>").concat(i,"</strong>");case"value":return!!e.value&&"<strong>".concat(e.value,"</strong>");case"views_shortcode":if(!e.value)return!1;var u=x.find((function(t){return t.value===e.value.value}));if(!u)return!1;if(u.extra){if(!e.extra)return!1;var l=u.extra.find((function(t){return t.value===e.extra.value}));return!!l&&"<strong>".concat(l.label,"</strong>")}return"<strong>".concat(u.label,"</strong>");case"custom_shortcode":if(!e.value)return!1;var p=e.extra?" ".concat(e.extra):"";return Object(r.sprintf)(c,"<strong>[".concat(e.value.value).concat(p,"]</strong>"));case"function":return!!e.value&&Object(r.sprintf)(c,"<strong>".concat(e.value.value,"(").concat(e.extra,")</strong>"));case"current_user":return"<strong>".concat(Object(r.__)("Current user","wpv-views"),"</strong>");case"current_role":return"<strong>".concat(Object(r.__)("Current user role","wpv-views"),"</strong>");case"custom_user":if(!e.value)return!1;var f=t?Object(r.__)("User %s","wpv-views"):Object(r.__)("user %s","wpv-views");return Object(r.sprintf)(f,"<strong>".concat(e.value.label,"</strong>"));case"custom_role":if(!e.value)return!1;var v=a.extra.listRoles.find((function(t){return t.value===e.value.value})),d=t?Object(r.__)("Role %s","wpv-views"):Object(r.__)("role %s","wpv-views");return!!v&&Object(r.sprintf)(d,"<strong>".concat(v.label,"</strong>"));default:return!1}},jt=function(e){switch(e.value){case"=":case"eq":return Object(r.__)("is equal to","wpv-views");case">":case"gt":return Object(r.__)("is greater than","wpv-views");case"<":case"lt":return Object(r.__)("is less than","wpv-views");case">=":case"gte":return Object(r.__)("is greater than or equal to","wpv-views");case"<=":case"lte":return Object(r.__)("is less than or equal to","wpv-views");case"!=":case"ne":return Object(r.__)("is not equal to","wpv-views");case"empty":return Object(r.__)("is empty","wpv-views");case"contains":return Object(r.__)("contains","wpv-views");case"not_contains":return Object(r.__)("doesn't contain","wpv-views");default:return!1}},St=function(e){switch(e.value){case">":case"gt":return{value:"lt"};case"<":case"lt":return{value:"gt"};case">=":case"gte":return{value:"lte"};case"<=":case"lte":return{value:"gte"};default:return e}},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){switch(e.value.value){case"now":return"<strong>".concat(Object(r.__)("now","wpv-views"),"</strong>");case"today":return"<strong>".concat(Object(r.__)("today","wpv-views"),"</strong>");case"future_day":return 1===parseInt(e.extra)?Object(r.__)("<strong>one day</strong> from <strong>now</strong>","wpv-views"):Object(r.sprintf)(Object(r.__)("<strong>%s days</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_day":return 1===parseInt(e.extra)?"<strong>".concat(Object(r.sprintf)(Object(r.__)("one day ago","wpv-views"),e.extra),"</strong>"):"<strong>".concat(Object(r.sprintf)(Object(r.__)("%s days ago","wpv-views"),e.extra),"</strong>");case"this_month":return Object(r.__)("the <strong>first day</strong> of <strong>this month</strong>","wpv-views");case"future_month":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("the <strong>first day</strong> of <strong>next month</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("the <strong>first day<strong> of <strong>%s months</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_month":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("the <strong>first day</strong> of <strong>past month</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("the <strong>first day</strong> of <strong>%s months ago</strong>","wpv-views"),e.extra);case"this_year":return Object(r.__)("<strong>January 1st</strong> of <strong>this year</strong>","wpv-views");case"future_year":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("<strong>January 1st</strong> of <strong>next year</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("<strong>January 1st</strong> in <strong>%s years</strong> from <strong>now</strong>","wpv-views"),e.extra);case"past_year":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("<strong>January 1st</strong> of <strong>past year</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("<strong>January 1st</strong> of <strong>%s years ago</strong>","wpv-views"),e.extra);case"seconds_from_now":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("<strong>one second</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("<strong>%s seconds</strong> from <strong>now</strong>","wpv-views"),e.extra);case"months_from_now":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("<strong>one month</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("<strong>%s months</strong> from <strong>now</strong>","wpv-views"),e.extra);case"years_from_now":return 1===parseInt(e.extra)?Object(r.sprintf)(Object(r.__)("<strong>one year</strong> from <strong>now</strong>","wpv-views"),e.extra):Object(r.sprintf)(Object(r.__)("<strong>%s years</strong> from <strong>now</strong>","wpv-views"),e.extra);case"date":return"<strong>".concat(Object(r.sprintf)(Object(r.__)("%s","wpv-views"),e.extra.replace(/(\d+),\s*(\d+),\s*(\d+)/g,(function(e,t,n,r){var o=function(e){return"0".concat(e).slice(-2)};return"".concat(r,"/").concat(o(n),"/").concat(o(t))}))),"</strong>")}return!1},o="date"===e.firstArgument.source.value,a=Et(o?e.secondArgument:e.firstArgument,!0,t),c=jt(o?St(e.operator):e.operator),i=n(o?e.firstArgument:e.secondArgument,!0);return"".concat(a," ").concat(c," ").concat(i)},Pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if([e.firstArgument.source.value,e.secondArgument.source.value].includes("date"))return Ct(e,t);var n=Et(e.firstArgument,!0,t),o=jt(e.operator),a="empty"===e.operator.value?"":Et(e.secondArgument,!1,t);return"="===e.operator.value?("value"!==e.firstArgument.source.value||e.firstArgument.value||(n=Object(r.__)("Empty","wpv-views"),o=""),"value"!==e.secondArgument.source.value||e.secondArgument.value||(o="",a=Object(r.__)("is empty","wpv-views"))):"!="===e.operator.value&&("value"!==e.firstArgument.source.value||e.firstArgument.value||(n=Object(r.__)("Not empty","wpv-views"),o=""),"value"!==e.secondArgument.source.value||e.secondArgument.value||(o="",a=Object(r.__)("is not empty","wpv-views"))),!1===n||!1===o||!1===a?Object(r.__)("Incomplete condition","wpv-views"):"".concat(n," ").concat(o," ").concat(a,".")};function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return It(this,n)}}function It(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(c,e);var t,n,r,a=Dt(c);function c(){return At(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.if,n=e.debug,r=t?'[wpv-conditional if="'.concat(t,'" ').concat(n?'debug="true"':"","]"):"",a=t?"[/wpv-conditional]":"";return React.createElement(o.Fragment,null,React.createElement(o.RawHTML,null,r),this.props.children,React.createElement(o.RawHTML,null,a))}}])&&Nt(t.prototype,n),r&&Nt(t,r),c}(o.Component)},"@wordpress/api-fetch":function(e,t){e.exports=window.wp.apiFetch},"@wordpress/components":function(e,t){e.exports=window.wp.components},"@wordpress/element":function(e,t){e.exports=window.wp.element},"@wordpress/hooks":function(e,t){e.exports=window.wp.hooks},"@wordpress/i18n":function(e,t){e.exports=window.wp.i18n},ToolsetDynamicSources:function(e,t){e.exports=ToolsetDynamicSources},"toolset/block/control":function(e,t){e.exports=window.toolsetCommonEs.block.control}});